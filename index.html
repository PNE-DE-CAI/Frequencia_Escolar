<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URE Caieiras - Projetor de Frequência Escolar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
        }
        
        .sed-gradient {
            background: linear-gradient(135deg, #005CA9 0%, #003366 100%);
        }
        
        .sed-blue {
            background-color: #005CA9;
        }
        
        .sed-dark-blue {
            background-color: #003366;
        }
        
        .sed-yellow {
            background-color: #FFD100;
        }
        
        .sed-light-blue {
            background-color: #E6F2FF;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #003366;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .tooltip .tooltiptext {
                width: 200px;
                margin-left: -100px;
            }
        }

        /* Estilo para a caixa de mensagem personalizada */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border: 2px solid #005CA9;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 2000;
            text-align: center;
        }

        .message-box button {
            background-color: #005CA9;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 6px;
            margin-top: 1rem;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Caixa de mensagem personalizada, inicialmente oculta -->
    <div id="messageBox" class="hidden message-box">
        <p id="messageText"></p>
        <button onclick="hideMessageBox()">OK</button>
    </div>

    <!-- Cabeçalho -->
    <header class="sed-gradient text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="flex items-center mb-4 md:mb-0">
                    <img src="https://i.ibb.co/fVNk5cR6/LOGO-DE.png" alt="Logo URE-CAIEIRAS" class="h-16 mr-4">
                    <div>
                        <h1 class="text-xl md:text-2xl font-bold">Unidade Regional de Ensino de Caieiras</h1>
                        <p class="text-sm md:text-base">Secretaria da Educação do Estado de São Paulo</p>
                    </div>
                </div>
                <nav class="flex space-x-4">
                    <a href="#" class="hover:text-yellow-300 transition"><i class="fas fa-home mr-1"></i> Início</a>
                    <a href="index2" class="hover:text-yellow-300 transition"><i class="fas fa-info-circle mr-1"></i> Mapeamento de ação Resolução 39</a>
                    <a href="#" class="hover:text-yellow-300 transition"><i class="fas fa-envelope mr-1"></i> Contato</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Conteúdo Principal -->
    <main class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <!-- Banner -->
            <div class="sed-blue text-white p-6">
                <h2 class="text-2xl font-bold mb-2">Projetor de Frequência Escolar</h2>
                <p class="text-sm">Ferramenta para cálculo da frequência necessária para alcançar a meta anual de IFA das escolas.</p>
                <p class="text-sm">NOSSA META GLOBAL DE REFERÊNCIA PARA O IFA É DE 82%.</p>
            </div>
            
            <div class="p-6">
                <!-- Calculadora -->
                <div class="max-w-2xl mx-auto">
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold text-slate-800 mb-4">Calculadora de Projeção</h3>
                        
                        <!-- Campo para o número de semanas passadas -->
                        <div class="mb-4">
                            <label for="semanasPassadasInput" class="block text-sm font-medium text-gray-700 mb-1">
                                Número de Semanas Passadas:
                                <span class="tooltip">
                                    <i class="fas fa-info-circle text-blue-500 ml-1"></i>
                                    <span class="tooltiptext">Insira o número de semanas já transcorridas do ano letivo (por exemplo, 27).</span>
                                </span>
                            </label>
                            <input type="number" id="semanasPassadasInput" placeholder="Ex: 27" value="27" step="1"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>

                        <!-- Campo para a média de frequência acumulada -->
                        <div class="mb-4">
                            <label for="mediaAcumuladaInput" class="block text-sm font-medium text-gray-700 mb-1">
                                Média de Frequência Acumulada (%):
                                <span class="tooltip">
                                    <i class="fas fa-info-circle text-blue-500 ml-1"></i>
                                    <span class="tooltiptext">Insira a média de frequência percentual acumulada até a semana mais recente.</span>
                                </span>
                            </label>
                            <input type="number" id="mediaAcumuladaInput" placeholder="Ex: 77.4" step="0.1"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
 <!-- NOVO CAMPO: IFA da Escola -->
                        <div class="mb-4">
                            <label for="ifaEscolaInput" class="block text-sm font-medium text-gray-700 mb-1">
                                IFA da Escola (%):
                                <span class="tooltip">
                                    <i class="fas fa-info-circle text-blue-500 ml-1"></i>
                                    <span class="tooltiptext">(SED) ACESSO >> <b>Início
Recursos Humanos
Bonificação por Resultados
Metas - Por Unidade 25-26</b> Que a sua escola precisa alcançar.</span>
                                </span>
                            </label>
                            <input type="number" id="ifaEscolaInput" placeholder="Ex: 82.0" step="0.1"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>

                        <button onclick="calcularProjecao()" 
                                class="w-full sed-blue text-white py-3 px-4 rounded-md hover:bg-blue-700 transition duration-300 font-medium">
                            <i class="fas fa-calculator mr-2"></i> Calcular Projeção
                        </button>
                        <div id="resultado" class="mt-6 p-4 sed-light-blue border border-blue-200 rounded-md text-center text-lg font-semibold">
                            A média para as próximas semanas não podera ser inferior a: --
                        </div>
                    </div>
                    
                    <!-- Explicação atualizada dinamicamente -->
                    <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                        <h3 class="text-xl font-semibold text-slate-800 mb-4">Entendendo a Meta de Frequência para o Ano Letivo</h3>
                        <p class="text-gray-700 mb-4">
                            Prezados gestores,<br>
                            O cálculo abaixo é uma ferramenta essencial para o nosso trabalho de prevenção à evasão escolar, como destaca a Resolução SEDUC 39/2023. Manter a frequência dos alunos é uma de nossas prioridades e, para isso, é fundamental que a equipe gestora entenda como e por que chegamos à meta de frequência necessária para as próximas semanas.
                        </p>
                        
                        <div class="space-y-6">
                            <!-- 1. Meta Total -->
                            <div>
                                <div class="flex items-center mb-2">
                                    <div class="sed-blue text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">1</div>
                                    <h4 class="text-lg font-medium text-slate-800">A Meta Total: Onde Queremos Chegar?</h4>
                                </div>
                                <div class="pl-11">
                                    <p class="text-gray-700 mb-2">
                                        O ano letivo tem em média 45 semanas no total; levando em conta o inicio do ano letivo em <b>03/02/2025</b> e termino em <b>16/12/2025</b>. Para efeito de acompanhamento dentro do <span class="font-bold text-red-700">Escola Total</span>, adotaremos a data final de <b>30/11/2025</b>. Nossa meta de frequência média para todo o ano é de <span id="ifaEscolaValor1">--</span>%. Para saber o "total de frequência" que precisamos ter ao final do ano, multiplicamos a meta pelo número total de semanas:
                                    </p>
                                    <div class="bg-blue-50 p-3 rounded-md border-l-4 border-blue-500 mb-2">
                                        <p class="font-mono text-blue-800"><span id="metaTotalCalc">--</span></p>
                                    </div>
                                    <p class="text-gray-700">
                                        Esse número, <span id="metaTotalValor">--</span>, representa a soma total de frequência que precisamos alcançar ao longo das 45 semanas. Ele é o nosso ponto de chegada.
                                    </p>
                                </div>
                            </div>
                            
                            <!-- 2. O Que Já Conquistamos -->
                            <div>
                                <div class="flex items-center mb-2">
                                    <div class="sed-blue text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">2</div>
                                    <h4 class="text-lg font-medium text-slate-800">O Que Já Conquistamos?</h4>
                                </div>
                                <div class="pl-11">
                                    <p class="text-gray-700 mb-2">
                                        Nas primeiras <span id="semanasPassadasValor">--</span> semanas, nossa escola obteve uma frequência média de <span id="mediaAcumuladaValor">--</span>%. Para saber o "total de frequência" que já acumulamos, multiplicamos a média alcançada pelo número de semanas passadas:
                                    </p>
                                    <div class="bg-blue-50 p-3 rounded-md border-l-4 border-blue-500 mb-2">
                                        <p class="font-mono text-blue-800"><span id="conquistadoCalc">--</span></p>
                                    </div>
                                    <p class="text-gray-700">
                                        Este valor, <span id="conquistadoValor">--</span>, é o nosso progresso até agora.
                                    </p>
                                </div>
                            </div>
                            
                            <!-- 3. O Desafio -->
                            <div>
                                <div class="flex items-center mb-2">
                                    <div class="sed-blue text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">3</div>
                                    <h4 class="text-lg font-medium text-slate-800">O Desafio: Quanto Precisamos Conquistar nas Próximas Semanas?</h4>
                                </div>
                                <div class="pl-11">
                                    <p class="text-gray-700 mb-2">
                                        Agora, precisamos descobrir o que falta para atingir nossa meta. Para isso, subtraímos o que já conquistamos do nosso objetivo final:
                                    </p>
                                    <div class="bg-blue-50 p-3 rounded-md border-l-4 border-blue-500 mb-2">
                                        <p class="font-mono text-blue-800"><span id="desafioCalc">--</span></p>
                                    </div>
                                    <p class="text-gray-700">
                                        O número <span id="desafioValor">--</span> é a soma de frequência que ainda precisamos acumular nas próximas <span id="semanasFuturasValor">--</span> semanas.
                                    </p>
                                </div>
                            </div>
                            
                            <!-- 4. A Estratégia -->
                            <div>
                                <div class="flex items-center mb-2">
                                    <div class="sed-blue text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">4</div>
                                    <h4 class="text-lg font-medium text-slate-800">A Estratégia: Qual a Frequência Média Necessária?</h4>
                                </div>
                                <div class="pl-11">
                                    <p class="text-gray-700 mb-2">
                                        Por fim, para saber qual deve ser a nossa frequência média semanal para as últimas <span id="semanasRestantesValor">--</span> semanas, dividimos o que falta ser conquistado pelo número de semanas restantes:
                                    </p>
                                    <div class="bg-blue-50 p-3 rounded-md border-l-4 border-blue-500 mb-2">
                                        <p class="font-mono text-blue-800"><span id="estrategiaCalc">--</span></p>
                                    </div>
                                    <p class="text-gray-700">
                                        Convertendo esse número para porcentagem, chegamos à nossa meta semanal: <span class="font-bold text-blue-700" id="metaSemanalValor">--</span>.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Conclusão atualizada -->
                        <div class="mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-md">
                            <h4 class="font-semibold text-slate-800 mb-2">Conclusão:</h4>
                            <p class="text-gray-700">
                                Para que nossa escola alcance o seu IFA de <span id="ifaEscolaValor2">--</span>%, precisaremos de uma frequência média de <span id="conclusaoMeta">--</span>% nas próximas <span id="conclusaoSemanasFuturas">--</span> semanas.
                                <br><br>
                                <span id="statusIFA"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Rodapé -->
    <footer class="sed-dark-blue text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">URE Caieiras</h3>
                    <p class="text-sm text-gray-300">
                        Unidade Regional de Ensino de Caieiras<br>
                        Secretaria da Educação do Estado de São Paulo
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contato</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li><i class="fas fa-phone-alt mr-2"></i>(11)4442-8605 </li>
                        <li><i class="fas fa-envelope mr-2"></i> ure.caieiras@educacao.sp.gov.br</li>
                        <li><i class="fas fa-map-marker-alt mr-2"></i> Endereço: Av. Prof. Carvalho Pinto, 159 - Centro, Caieiras/SP</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Links Úteis</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="https://www.educacao.sp.gov.br/" class="text-gray-300 hover:text-yellow-300 transition"><i class="fas fa-external-link-alt mr-2"></i> SEDUC-SP</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-300 transition"><i class="fas fa-file-alt mr-2"></i> Resoluções</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-300 transition"><i class="fas fa-chalkboard-teacher mr-2"></i> Formações</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-sm text-gray-400">
                <p>© 2025 Unidade Regional de Ensino de Caieiras. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Função para mostrar a caixa de mensagem personalizada
        function showMessageBox(message) {
            const messageBox = document.getElementById('messageBox');
            const messageText = document.getElementById('messageText');
            messageText.innerText = message;
            messageBox.classList.remove('hidden');
        }

        // Função para esconder a caixa de mensagem
        function hideMessageBox() {
            const messageBox = document.getElementById('messageBox');
            messageBox.classList.add('hidden');
        }

        // Função para calcular e exibir a projeção de frequência
        function calcularProjecao() {
            // Obtém os valores dos campos de input
            const semanasPassadasInput = document.getElementById('semanasPassadasInput');
            const mediaAcumuladaInput = document.getElementById('mediaAcumuladaInput');
            const ifaEscolaInput = document.getElementById('ifaEscolaInput');

            // Converte os valores para números
            const semanasPassadas = parseFloat(semanasPassadasInput.value);
            const mediaAcumuladaValue = parseFloat(mediaAcumuladaInput.value);
            const ifaEscolaValue = parseFloat(ifaEscolaInput.value);

            // Variáveis fixas
            const totalSemanas = 45;

            // Valida os inputs
            if (isNaN(semanasPassadas) || isNaN(mediaAcumuladaValue) || isNaN(ifaEscolaValue) || semanasPassadas <= 0 || semanasPassadas >= totalSemanas) {
                showMessageBox('Por favor, insira valores válidos para todos os campos.');
                return;
            }
            
            // Converte IFA para decimal
            const mediaMetaAnual = ifaEscolaValue / 100;

            // Calcula as semanas futuras dinamicamente
            const semanasFuturas = totalSemanas - semanasPassadas;
            const mediaAcumuladaDecimal = mediaAcumuladaValue / 100;
            
            // Cálculo da projeção
            const somaTotalNecessaria = mediaMetaAnual * totalSemanas;
            const somaPassada = mediaAcumuladaDecimal * semanasPassadas;
            const somaFuturaNecessaria = somaTotalNecessaria - somaPassada;
            const mediaFuturaDecimal = somaFuturaNecessaria / semanasFuturas;
            const mediaFuturaPorcentagem = (mediaFuturaDecimal * 100).toFixed(2);
            
            // Animação para o resultado
            const resultadoElement = document.getElementById('resultado');
            resultadoElement.classList.remove('animate-pulse');
            void resultadoElement.offsetWidth; // Dispara o reflow para reiniciar a animação
            resultadoElement.classList.add('animate-pulse');
            
            // Atualiza o texto do resultado principal
            resultadoElement.innerHTML = `A média para as próximas <span class="text-blue-700 text-xl">${semanasFuturas}</span> semanas não podera ser inferior a: <span class="text-blue-700 text-xl">${mediaFuturaPorcentagem}%</span>`;
            
            // Atualiza os valores dinâmicos na seção de explicação
            document.getElementById('ifaEscolaValor1').innerText = ifaEscolaValue.toFixed(1);
            document.getElementById('semanasPassadasValor').innerText = semanasPassadas;
            document.getElementById('mediaAcumuladaValor').innerText = mediaAcumuladaValue.toFixed(1);
            
            document.getElementById('metaTotalCalc').innerText = `${mediaMetaAnual.toFixed(3)} x ${totalSemanas} semanas = ${somaTotalNecessaria.toFixed(3)}`;
            document.getElementById('metaTotalValor').innerText = somaTotalNecessaria.toFixed(3);
            
            document.getElementById('conquistadoCalc').innerText = `${mediaAcumuladaDecimal.toFixed(3)} x ${semanasPassadas} semanas = ${somaPassada.toFixed(3)}`;
            document.getElementById('conquistadoValor').innerText = somaPassada.toFixed(3);
            
            document.getElementById('desafioCalc').innerText = `${somaTotalNecessaria.toFixed(3)} (total necessário) - ${somaPassada.toFixed(3)} (total acumulado) = ${somaFuturaNecessaria.toFixed(3)}`;
            document.getElementById('desafioValor').innerText = somaFuturaNecessaria.toFixed(3);
            document.getElementById('semanasFuturasValor').innerText = semanasFuturas;
            
            document.getElementById('semanasRestantesValor').innerText = semanasFuturas;
            document.getElementById('estrategiaCalc').innerText = `${somaFuturaNecessaria.toFixed(3)} (total que falta) ÷ ${semanasFuturas} semanas = ${mediaFuturaDecimal.toFixed(4)}`;
            document.getElementById('metaSemanalValor').innerText = `${mediaFuturaPorcentagem}%`;

            document.getElementById('conclusaoMeta').innerText = `${mediaFuturaPorcentagem}%`;
            document.getElementById('conclusaoSemanasFuturas').innerText = semanasFuturas;
            document.getElementById('ifaEscolaValor2').innerText = ifaEscolaValue.toFixed(1);

            // Lógica para determinar o status da escola em relação ao IFA
            let statusText = '';
            if (mediaFuturaDecimal > 1) { // Acima de 100% de frequência necessária = impossível
                statusText = `<span class="font-bold text-red-700">Atenção:</span> Com a média acumulada atual, é matematicamente impossível alcançar a meta do IFA.`;
            } else if (mediaFuturaValue > ifaEscolaValue) {
                statusText = `<span class="font-bold text-green-700">Excelente!</span> A escola está acima da média necessária para atingir o IFA. Continue o ótimo trabalho!`;
            } else if (mediaFuturaValue > mediaAcumuladaValue) {
                statusText = `<span class="font-bold text-yellow-700">No caminho certo!</span> A escola precisa intensificar as ações para alcançar a média semanal de ${mediaFuturaPorcentagem}% nas próximas semanas e, assim, atingir o IFA.`;
            } else {
                statusText = ``;
            }

            // Média futura (decimal) pode ser > 1, indicando que a meta é inalcançável.
            // Para a comparação com o IFA, o ideal é usar a média acumulada atual.
            if (mediaAcumuladaValue < ifaEscolaValue) {
                 statusText = `<span class="font-bold text-red-700">Atenção:</span> A média acumulada da escola (${mediaAcumuladaValue.toFixed(1)}%) está abaixo do IFA de ${ifaEscolaValue.toFixed(1)}%. Será necessário um esforço maior para recuperar nas próximas semanas.`;
            } else if (mediaAcumuladaValue >= ifaEscolaValue) {
                statusText = `<span class="font-bold text-green-700">Ótimo!</span> A média acumulada da escola (${mediaAcumuladaValue.toFixed(1)}%) já está no ou acima do IFA de ${ifaEscolaValue.toFixed(1)}%.`;
            }

            document.getElementById('statusIFA').innerHTML = statusText;
            
            // Adiciona confetes se a meta for alcançável (<= 100%)
            if (mediaFuturaDecimal <= 1) {
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            }
        }
        
        // Função de confete simples
        function confetti({ particleCount, spread, origin }) {
            const colors = ['#005CA9', '#FFD100', '#003366', '#FFFFFF'];
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            canvas.style.position = 'fixed';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.pointerEvents = 'none';
            canvas.style.zIndex = '1000';
            document.body.appendChild(canvas);
            
            const particles = [];
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: origin.x * canvas.width,
                    y: origin.y * canvas.height,
                    size: Math.random() * 5 + 2,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speedX: (Math.random() - 0.5) * spread,
                    speedY: (Math.random() * 3 + 2),
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 10
                });
            }
            
            let animationId;
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.rotation * Math.PI / 180);
                    
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    
                    ctx.restore();
                    
                    p.x += p.speedX;
                    p.y += p.speedY;
                    p.rotation += p.rotationSpeed;
                    
                    // Reset particle when it goes out of screen
                    if (p.y > canvas.height) {
                        p.y = origin.y * canvas.height;
                        p.x = origin.x * canvas.width;
                    }
                }
                
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
            
            // Remove canvas after animation
            setTimeout(() => {
                cancelAnimationFrame(animationId);
                canvas.remove();
            }, 3000);
        }
    </script>
</body>
</html>












